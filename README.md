# 支持多线程的数据库连接池(Linux C/C++ mysql)
## 前言：
**网上关于Linux C/C++的连接池相关项目很少，即便是有也难以满足我的需求，比如：**

1、无法支持阻塞形式（线程休眠等待空闲连接）获取空闲连接；

2、网上流传的基于mysql++开发的连接池，还需要引入boost等三方库，稍显繁琐；

**基于以上原因，本人自己写了这个连接池**，有问题下方留言，大家共同进步！


## 本连接池的特点：
**1、支持多线程；**

**2、从连接池获取空闲连接时支持阻塞（直到获取到空闲连接）和非阻塞（没有空闲连接直接返回，获取互斥锁的时间可以忽略不计）两种形式；**

**3、托管了mysql的连接；**

## 本项目存在的缺点以及下一步计划：
**1、没有将mysql提供的API封装，故在获取到空闲连接后还需要调用相关API进行相关CURD操作；**

**2、对于长时间空闲的连接，未予以自动释放；**


## 总结：
虽然本连接池还有存在一些问题（前面提到的问题），**但足以满足普通项目的开发了**，有问题可以在下方留言！



## 本项目博客地址
https://blog.csdn.net/Think88666/article/details/119336144


## CConnectPool类的相关接口说明

```C++
    /**
    * @brief 创建连接池 \n
    * 在主线程中创建连接池，创建后需要调用FreePool予以释放
    * 创建失败程序会打印错误信息并终止运行
    */
    static void CreatePool();

    /**
    * @brief 释放连接池 \n
    * 需要在主线程中调用该接口
    */
    static void FreePool();

    /**
    * @brief 获取连接 \n
    * 支持多线程，使用完成后需调用PutConnect，归还连接，本函数为阻塞函数，直到有可用连接才调用返回
    * @return 返回数据库连接
    *  --NULL表示调用失败
    */
    static MYSQL* GetConnect();

    /**
    * @brief 获取连接 \n
    * 支持多线程，使用完成后需调用PutConnect，归还连接，本函数调用后立刻返回，若没有空闲连接则返回NULL
    * @return 返回数据库连接
    *  --NULL表示调用失败
    * */
    static MYSQL* TryGetConnect();

    /**
    * @brief 向连接池归还连接 \n
    * 支持多线程
    * @param[in] pConn    需要归还的数据库连接
    * */
    static void PutConnect(MYSQL*pConn);
```
  
